<!--  לא מסודר העמוד כלומר לבדוק את הפרמטרים החדשים הפרמטרים הישניםקטגוריה תת קטגוריה וכו'   -->
<form dir="rtl" #myForm="ngForm" (submit)="OnAddProduct(myForm)">
  <label>קטגוריה:</label>
  <select name="CategoryId" (change)="onCategoryChanged(true)" [(ngModel)]="mainCategoryID">
    <ng-container *ngFor="let item of categories">
      <option *ngIf="!item.ParentId" [value]="item.CategoryId">{{item.CategoryName}}</option>
    </ng-container>
  </select>
<br>
  <label>תת קטגוריה:</label>
  <select name="SubCategoryId" (change)="onCategoryChanged()"
    [(ngModel)]="product.CategoryId">
    <ng-container *ngFor="let item of categories">
      <option value="-1" hidden>בחר:</option>
      <option *ngIf="item.ParentId == mainCategoryID" [value]="item.CategoryId">{{item.CategoryName}}</option>
    </ng-container>
  </select>

<br>

  <label>שם מוצר:</label>
  <input type="text" ngModel name="productName"><br><br>
  <label>תאור:</label>
  <input type="text" ngModel name="productDescription"><br><br>
  <label>address point x:</label>
  <input type="number" ngModel name="addressPointX"><br><br>
  <label>address point y:</label>
  <input type="number" ngModel name="addressPointY"><br><br>
  <label>תאריך אבידה/מציאה:</label>
  <input type="date" ngModel name="Date"><br><br>
  בחר סוג:
  <br>
  <select [(ngModel)]="product.lostOrFound" name="lostOrFound" id="">
    <option value="0">אבידה</option>
    <option value="1">מציאה</option>
  </select>
  <div *ngIf="parametersAreExist!=null">
    <!-- פרמטרים קיימים: -->
    <div *ngFor="let item of parametersAreExist; let i = index">
      <label >{{item.ParameterName}}</label>
      <input name="parameterExistValue-{{i}}" [(ngModel)]="ParameterOfProductAreExist[i].value" type="text">
      <!-- לא עדכנתי את ה parameterOfProduct.ProductId -->
      <br><br>
    </div>
  </div>
  <div>
    <label>הוספת פרמטר חדש: </label>
    <div *ngFor="let item of NewParameters; let index = index">
      <label for="NewParametersd-{{index}}-Name">שם</label>
       <input name="NewParameters-{{index}}-Name" [(ngModel)]="item.ParameterName" type="text">
   
      <label for="NewParametersd-{{index}}-Value">ערך</label>
       <input name="NewParameters-{{index}}-Value" [(ngModel)]="NewParameterOfProduct[index].value" type="text"> <br>
      <!-- לא עדכנתי את ה parameter.categoryId  -->
    </div>
  </div>
  
  <!-- ?checkbox הגדרת סוכן חכם כדאי להחליף ל  -->
  <!-- selected doesnt work -->
  <label>בחר אפשרות:</label>
  <select name="test-r" [(ngModel)]="product.CleverAgent" >
    <option value="true" >אני מעונין לקבל עדכונים למייל שלי</option>
    <option value="false">אני לא מעונין לקבל עדכונים למייל שלי</option><br><br>
  </select>
  <button type="submit">addProduct</button> 
  <button (click)="addParameter()">+</button> 
</form>